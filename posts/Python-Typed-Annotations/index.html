<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Python Typed Annotations" /><meta property="og:locale" content="en_US" /><meta name="description" content="Python 3.10 just announced their release on April 10 this year. Most of the updates were done to improve the developer experience and maintainability of the codebase. We enjoyed the fun of writing Python code for its readable syntax, and user-friendly language design. It was clearly meant for getting rid of type prefix you would normally write in other languages such as C++ or Java. Keep in mind that C++ and Java are compiled languages that necessarily impose a set of grammatical rules for mapping them onto a machine code that you can execute. But Python is a dynamically typed language where the interpreter can infer the type of the entities we are calling out on our function by the concept of duck typing – if it walks like a duck and it quacks like a duck, then it must be a duck. This gives us so much room to focus on the algorithm instead of worrying about an obscure programming syntax in expressing the logic of our code. This is okay for relatively small projects where we could just comment out the type of parameters we expect on our function(or method). But building a maintainable software system with people calls for a better solution than commenting out what their function expects. Before we talk about typed annotations in Python, let us first appreciate the elegance of type prefix in other languages so we can get a sense of when to annotate our code. Whereas type prefix can introduce syntax overheads, it is built-in the language for a reason: (1) parsing, and (2) type-safety. In a way, type prefix guards whatever type our function expects to take in and the type it returns for we can generally think of a function as a black box that accepts and returns something. With an imposed typed restrictions to other compiled languages, it enables us to keep the intentionality of our code, that we can guarantee that it is serving its purpose. So, not only that we can clearly write (and read) what goes in and out of our function, but we can also ensure that our function takes in the right types that we specified. But how can we adapt this to Python? That’s where type annotations come in. In the following sections, we will explore some features of Type annotations that Python 3.10 supports. Before we begin, here’s how we can annotate a simple function in Python: 1 2 3 4 5 6 7 # annotated def λ(x:int)-&gt;float: return x*0.1 # unannotated def λ(x): return x*0.1 As we see in the annotated version of our λ function, it takes an integer value of x and returns a value of type float whereas the unannotated version may require some guessing into what λ function expects. Consider the same function written in C++: 1 2 3 float λ(int x){ return (float)x*0.1; } The main benefit we get on type annotations in Python is readability and static analysis. The PEP 484, on Python 3.5 release specified that although Python may potentially support runtime type checking, Python will remain a dynamic language. What is Static analysis and how can we do that in Python? Static analysis tools are a way to easily detect vulnerabilities without executing a program. This provides an insight into our code without necessarily executing them which automates code quality maintenance. Static analysis tools also automate finding security problems at an early age. So far so great, but how can we use it on our IDE’s? There are several types of static analysis that exist, and they have different purposes ranging from styling analysis to unused code detection. Here’s an article I found that explores the ecosystem for Python static analysis. Now, let’s cover some features of type annotations we can do with Python 3.10. New type union operator 1 2 3 4 5 6 7 8 # in previous versions def λ(x: Union[int, float])-&gt;Union[int, float]: return x*2 # in Python 3.10 def λ(x: int | float)-&gt; int | float: return x*2 The new union operator is accepted as the second arguments to isinstance() and issubclass() functions as in: 1 2 &gt;&gt;&gt; isinstance(1, int | str) True Improved TypeAlias Annotation Type aliasing in Python can now be expressed explicitly. Compare: 1 2 3 # in previous versions StrCache = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant and 1 2 3 # in Python 3.10 StrCache: TypeAlias = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant For more see: https://docs.python.org/3.10/whatsnew/3.10.html. Takeaways While type annotations may introduce syntactical overhead, it improves the readability of our code thereby keeping our intentionality intact. As developers, we want to make our codebase easy to use and difficult to misuse." /><meta property="og:description" content="Python 3.10 just announced their release on April 10 this year. Most of the updates were done to improve the developer experience and maintainability of the codebase. We enjoyed the fun of writing Python code for its readable syntax, and user-friendly language design. It was clearly meant for getting rid of type prefix you would normally write in other languages such as C++ or Java. Keep in mind that C++ and Java are compiled languages that necessarily impose a set of grammatical rules for mapping them onto a machine code that you can execute. But Python is a dynamically typed language where the interpreter can infer the type of the entities we are calling out on our function by the concept of duck typing – if it walks like a duck and it quacks like a duck, then it must be a duck. This gives us so much room to focus on the algorithm instead of worrying about an obscure programming syntax in expressing the logic of our code. This is okay for relatively small projects where we could just comment out the type of parameters we expect on our function(or method). But building a maintainable software system with people calls for a better solution than commenting out what their function expects. Before we talk about typed annotations in Python, let us first appreciate the elegance of type prefix in other languages so we can get a sense of when to annotate our code. Whereas type prefix can introduce syntax overheads, it is built-in the language for a reason: (1) parsing, and (2) type-safety. In a way, type prefix guards whatever type our function expects to take in and the type it returns for we can generally think of a function as a black box that accepts and returns something. With an imposed typed restrictions to other compiled languages, it enables us to keep the intentionality of our code, that we can guarantee that it is serving its purpose. So, not only that we can clearly write (and read) what goes in and out of our function, but we can also ensure that our function takes in the right types that we specified. But how can we adapt this to Python? That’s where type annotations come in. In the following sections, we will explore some features of Type annotations that Python 3.10 supports. Before we begin, here’s how we can annotate a simple function in Python: 1 2 3 4 5 6 7 # annotated def λ(x:int)-&gt;float: return x*0.1 # unannotated def λ(x): return x*0.1 As we see in the annotated version of our λ function, it takes an integer value of x and returns a value of type float whereas the unannotated version may require some guessing into what λ function expects. Consider the same function written in C++: 1 2 3 float λ(int x){ return (float)x*0.1; } The main benefit we get on type annotations in Python is readability and static analysis. The PEP 484, on Python 3.5 release specified that although Python may potentially support runtime type checking, Python will remain a dynamic language. What is Static analysis and how can we do that in Python? Static analysis tools are a way to easily detect vulnerabilities without executing a program. This provides an insight into our code without necessarily executing them which automates code quality maintenance. Static analysis tools also automate finding security problems at an early age. So far so great, but how can we use it on our IDE’s? There are several types of static analysis that exist, and they have different purposes ranging from styling analysis to unused code detection. Here’s an article I found that explores the ecosystem for Python static analysis. Now, let’s cover some features of type annotations we can do with Python 3.10. New type union operator 1 2 3 4 5 6 7 8 # in previous versions def λ(x: Union[int, float])-&gt;Union[int, float]: return x*2 # in Python 3.10 def λ(x: int | float)-&gt; int | float: return x*2 The new union operator is accepted as the second arguments to isinstance() and issubclass() functions as in: 1 2 &gt;&gt;&gt; isinstance(1, int | str) True Improved TypeAlias Annotation Type aliasing in Python can now be expressed explicitly. Compare: 1 2 3 # in previous versions StrCache = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant and 1 2 3 # in Python 3.10 StrCache: TypeAlias = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant For more see: https://docs.python.org/3.10/whatsnew/3.10.html. Takeaways While type annotations may introduce syntactical overhead, it improves the readability of our code thereby keeping our intentionality intact. As developers, we want to make our codebase easy to use and difficult to misuse." /><link rel="canonical" href="https://adeeconometrics.github.io//posts/Python-Typed-Annotations/" /><meta property="og:url" content="https://adeeconometrics.github.io//posts/Python-Typed-Annotations/" /><meta property="og:site_name" content="Dave Amiana" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-12T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Python Typed Annotations" /><meta name="twitter:site" content="@iamdeb25" /><meta name="google-site-verification" content="google-site-verification=28bVbRErS2VwJaonXuu3GbqmRlyNvizt6I00B2kQh88" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-10-22T22:11:50+08:00","datePublished":"2021-04-12T00:00:00+08:00","description":"Python 3.10 just announced their release on April 10 this year. Most of the updates were done to improve the developer experience and maintainability of the codebase. We enjoyed the fun of writing Python code for its readable syntax, and user-friendly language design. It was clearly meant for getting rid of type prefix you would normally write in other languages such as C++ or Java. Keep in mind that C++ and Java are compiled languages that necessarily impose a set of grammatical rules for mapping them onto a machine code that you can execute. But Python is a dynamically typed language where the interpreter can infer the type of the entities we are calling out on our function by the concept of duck typing – if it walks like a duck and it quacks like a duck, then it must be a duck. This gives us so much room to focus on the algorithm instead of worrying about an obscure programming syntax in expressing the logic of our code. This is okay for relatively small projects where we could just comment out the type of parameters we expect on our function(or method). But building a maintainable software system with people calls for a better solution than commenting out what their function expects. Before we talk about typed annotations in Python, let us first appreciate the elegance of type prefix in other languages so we can get a sense of when to annotate our code. Whereas type prefix can introduce syntax overheads, it is built-in the language for a reason: (1) parsing, and (2) type-safety. In a way, type prefix guards whatever type our function expects to take in and the type it returns for we can generally think of a function as a black box that accepts and returns something. With an imposed typed restrictions to other compiled languages, it enables us to keep the intentionality of our code, that we can guarantee that it is serving its purpose. So, not only that we can clearly write (and read) what goes in and out of our function, but we can also ensure that our function takes in the right types that we specified. But how can we adapt this to Python? That’s where type annotations come in. In the following sections, we will explore some features of Type annotations that Python 3.10 supports. Before we begin, here’s how we can annotate a simple function in Python: 1 2 3 4 5 6 7 # annotated def λ(x:int)-&gt;float: return x*0.1 # unannotated def λ(x): return x*0.1 As we see in the annotated version of our λ function, it takes an integer value of x and returns a value of type float whereas the unannotated version may require some guessing into what λ function expects. Consider the same function written in C++: 1 2 3 float λ(int x){ return (float)x*0.1; } The main benefit we get on type annotations in Python is readability and static analysis. The PEP 484, on Python 3.5 release specified that although Python may potentially support runtime type checking, Python will remain a dynamic language. What is Static analysis and how can we do that in Python? Static analysis tools are a way to easily detect vulnerabilities without executing a program. This provides an insight into our code without necessarily executing them which automates code quality maintenance. Static analysis tools also automate finding security problems at an early age. So far so great, but how can we use it on our IDE’s? There are several types of static analysis that exist, and they have different purposes ranging from styling analysis to unused code detection. Here’s an article I found that explores the ecosystem for Python static analysis. Now, let’s cover some features of type annotations we can do with Python 3.10. New type union operator 1 2 3 4 5 6 7 8 # in previous versions def λ(x: Union[int, float])-&gt;Union[int, float]: return x*2 # in Python 3.10 def λ(x: int | float)-&gt; int | float: return x*2 The new union operator is accepted as the second arguments to isinstance() and issubclass() functions as in: 1 2 &gt;&gt;&gt; isinstance(1, int | str) True Improved TypeAlias Annotation Type aliasing in Python can now be expressed explicitly. Compare: 1 2 3 # in previous versions StrCache = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant and 1 2 3 # in Python 3.10 StrCache: TypeAlias = &#39;Cache[str]&#39; # a type alias LOG_PREFIX = &#39;LOG[DEBUG]&#39; # a module constant For more see: https://docs.python.org/3.10/whatsnew/3.10.html. Takeaways While type annotations may introduce syntactical overhead, it improves the readability of our code thereby keeping our intentionality intact. As developers, we want to make our codebase easy to use and difficult to misuse.","headline":"Python Typed Annotations","mainEntityOfPage":{"@type":"WebPage","@id":"https://adeeconometrics.github.io//posts/Python-Typed-Annotations/"},"url":"https://adeeconometrics.github.io//posts/Python-Typed-Annotations/"}</script><title>Python Typed Annotations | Dave Amiana</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dave Amiana"><meta name="application-name" content="Dave Amiana"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-0M61FBNQ0K"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-0M61FBNQ0K'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/favicons/profile-picture.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dave Amiana</a></div><div class="site-subtitle font-italic">Open-source and Enterprise Software Developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/adeeconometrics" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://www.linkedin.com/in/dave-amiana/" aria-label="linkedin" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['amiana.dave','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Python Typed Annotations</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Python Typed Annotations</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Dave Amiana </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Apr 12, 2021, 12:00 AM +0800" prep="on" > Apr 12, 2021 <i class="unloaded">2021-04-12T00:00:00+08:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Oct 22, 2022, 10:11 PM +0800" prefix="Updated " > Oct 22, 2022 <i class="unloaded">2022-10-22T22:11:50+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="791 words">4 min</span></div></div><div class="post-content"><p>Python 3.10 just announced their <a href="https://docs.python.org/3.10/whatsnew/3.10.html">release</a> on April 10 this year. Most of the updates were done to improve the developer experience and maintainability of the codebase.</p><p>We enjoyed the fun of writing Python code for its readable syntax, and user-friendly language design. It was clearly meant for getting rid of type prefix you would normally write in other languages such as C++ or Java. Keep in mind that C++ and Java are compiled languages that necessarily impose a set of grammatical rules for mapping them onto a machine code that you can execute. But Python is a dynamically typed language where the interpreter can infer the type of the entities we are calling out on our function by the concept of <a href="https://bityl.co/6LB9">duck typing</a> – <em>if it walks like a duck and it quacks like a duck, then it must be a duck</em>. This gives us so much room to focus on the algorithm instead of worrying about an obscure programming syntax in expressing the logic of our code. This is okay for relatively small projects where we could just comment out the type of parameters we expect on our function(or method). But building a maintainable software system with people calls for a better solution than commenting out what their function expects.</p><p>Before we talk about typed annotations in Python, let us first appreciate the elegance of type prefix in other languages so we can get a sense of when to annotate our code. Whereas type prefix can introduce syntax overheads, it is built-in the language for a reason: (1) <a href="https://bityl.co/6LBU">parsing</a>, and (2) <a href="https://bityl.co/6LBT">type-safety</a>. In a way, type prefix guards whatever type our function expects to take in and the type it returns for we can generally think of a function as a black box that accepts and returns something. With an imposed typed restrictions to other compiled languages, it enables us to keep the intentionality of our code, that we can guarantee that it is serving its purpose. So, not only that we can clearly write (and read) what goes in and out of our function, but we can also ensure that our function takes in the right types that we specified.</p><p>But how can we adapt this to Python? That’s where type annotations come in.</p><p>In the following sections, we will explore some features of Type annotations that Python 3.10 supports. Before we begin, here’s how we can annotate a simple function in Python:</p><div class="language-py highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c1"># annotated
</span><span class="k">def</span> <span class="nf">λ</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">float</span><span class="p">:</span>
     <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mf">0.1</span>

<span class="c1"># unannotated
</span><span class="k">def</span> <span class="nf">λ</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
     <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mf">0.1</span>
</pre></table></code></div></div><p>As we see in the annotated version of our <code class="language-plaintext highlighter-rouge">λ</code> function, it takes an integer value of <code class="language-plaintext highlighter-rouge">x</code> and returns a value of type <code class="language-plaintext highlighter-rouge">float</code> whereas the unannotated version may require some guessing into what <code class="language-plaintext highlighter-rouge">λ</code> function expects. Consider the same function written in C++:</p><div class="language-py highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nb">float</span> <span class="n">λ</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span><span class="p">){</span>
    <span class="nf">return </span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="n">x</span><span class="o">*</span><span class="mf">0.1</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>The main benefit we get on type annotations in Python is readability and static analysis. The <a href="https://www.python.org/dev/peps/pep-0484/">PEP 484</a>, on Python 3.5 release specified that although Python may potentially support runtime type checking, Python will remain a dynamic language.</p><h3 id="what-is-static-analysis-and-how-can-we-do-that-in-python">What is Static analysis and how can we do that in Python?</h3><p>Static analysis tools are a way to easily detect vulnerabilities without executing a program. This provides an insight into our code without necessarily executing them which automates code quality maintenance. Static analysis tools also automate finding security problems at an early age. So far so great, but how can we use it on our IDE’s?</p><p>There are several types of static analysis that exist, and they have different purposes ranging from styling analysis to unused code detection. <a href="https://luminousmen.com/post/python-static-analysis-tools">Here’s an article</a> I found that explores the ecosystem for Python static analysis.</p><hr /><p>Now, let’s cover some features of type annotations we can do with Python 3.10.</p><h4 id="new-type-union-operator">New type union operator</h4><div class="language-py highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1"># in previous versions
</span><span class="k">def</span> <span class="nf">λ</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span><span class="o">-&gt;</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span>

<span class="c1"># in Python 3.10
</span><span class="k">def</span> <span class="nf">λ</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span><span class="o">-&gt;</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
   <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="mi">2</span>

</pre></table></code></div></div><p>The new union operator is accepted as the second arguments to <code class="language-plaintext highlighter-rouge">isinstance()</code> and <code class="language-plaintext highlighter-rouge">issubclass()</code> functions as in:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>&gt;&gt;&gt; isinstance(1, int | str)
True
</pre></table></code></div></div><h4 id="improved-typealias-annotation">Improved TypeAlias Annotation</h4><p>Type aliasing in Python can now be expressed explicitly. Compare:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre># in previous versions
StrCache = 'Cache[str]'  # a type alias
LOG_PREFIX = 'LOG[DEBUG]'  # a module constant
</pre></table></code></div></div><p>and</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre># in Python 3.10
StrCache: TypeAlias = 'Cache[str]'  # a type alias
LOG_PREFIX = 'LOG[DEBUG]'  # a module constant
</pre></table></code></div></div><p>For more see: https://docs.python.org/3.10/whatsnew/3.10.html.</p><hr /><h2 id="takeaways">Takeaways</h2><p>While type annotations may introduce syntactical overhead, it improves the readability of our code thereby keeping our intentionality intact. As developers, we want to make our codebase easy to use and difficult to misuse.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a>, <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >Programming</a> <a href="/tags/python/" class="post-tag no-text-decoration" >Python</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Python Typed Annotations - Dave Amiana&url=https://adeeconometrics.github.io//posts/Python-Typed-Annotations/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Python Typed Annotations - Dave Amiana&u=https://adeeconometrics.github.io//posts/Python-Typed-Annotations/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Python Typed Annotations - Dave Amiana&url=https://adeeconometrics.github.io//posts/Python-Typed-Annotations/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/On-Pointer-Types/">On Pointer Types</a><li><a href="/posts/Pointers-and-References-Design-Goals-and-Use-Cases/">Pointers and References: Design Goals and Use Cases</a><li><a href="/posts/Unique-Reference/">Unique References</a><li><a href="/posts/Shared-Reference/">Shared References</a><li><a href="/posts/Weak-Reference/">Weak References</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/computer-science/">Computer Science</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/data-structures/">Data Structures</a> <a class="post-tag" href="/tags/programming/">Programming</a> <a class="post-tag" href="/tags/algorithms/">Algorithms</a> <a class="post-tag" href="/tags/ownership-semantics/">Ownership Semantics</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/java/">Java</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Programming-for-Beginners/"><div class="card-body"> <span class="timeago small" > Feb 16, 2021 <i class="unloaded">2021-02-16T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Programming for Beginners</h3><div class="text-muted small"><p> Programming is a form of communication as it attempts to convey your idea to a recipient, but you have to be direct and unambiguous with your statements. The languages we use to converse with anoth...</p></div></div></a></div><div class="card"> <a href="/posts/Parameter-Passing-in-Cpp/"><div class="card-body"> <span class="timeago small" > Apr 10, 2021 <i class="unloaded">2021-04-10T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Parameter Passing in C++</h3><div class="text-muted small"><p> C++ offers a myriad of configuration that enhances performance. Most of these can be traced with the idea of pointers and references. Pointers and references are tools for memory management that al...</p></div></div></a></div><div class="card"> <a href="/posts/World-Of-Forms-Introduction-to-OOP/"><div class="card-body"> <span class="timeago small" > Apr 21, 2021 <i class="unloaded">2021-04-21T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>World of Forms: An Introduction to Object-Oriented Programming</h3><div class="text-muted small"><p> Object-oriented programming (OOP) has become one of the most used programming paradigms since its conception. Part of the reason why the object-oriented approach is widely practiced is code-reusabi...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Parameter-Passing-in-Cpp/" class="btn btn-outline-primary" prompt="Older"><p>Parameter Passing in C++</p></a> <a href="/posts/Recursion-is-Recursion/" class="btn btn-outline-primary" prompt="Newer"><p>Recursion is Recursion</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://twitter.com/iamdeb25">Dave Amiana</a>.</p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/computer-science/">Computer Science</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/data-structures/">Data Structures</a> <a class="post-tag" href="/tags/programming/">Programming</a> <a class="post-tag" href="/tags/algorithms/">Algorithms</a> <a class="post-tag" href="/tags/ownership-semantics/">Ownership Semantics</a> <a class="post-tag" href="/tags/ai/">AI</a> <a class="post-tag" href="/tags/c/">C#</a> <a class="post-tag" href="/tags/java/">Java</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://adeeconometrics.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
